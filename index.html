<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nike Air Force 1 - Scroll Experience</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Arial', 'Helvetica', sans-serif;
            overflow-x: hidden;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        }

        /* Canvas fixed in background */
        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: -1;
            pointer-events: none;
        }

        /* Scroll sections */
        section {
            height: 100vh;
            width: 100%;
            position: relative;
            display: flex;
            align-items: center;
            box-sizing: border-box;
            padding: 0 10%;
        }

        .content-block {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 3rem;
            border-radius: 20px;
            max-width: 500px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            transform: translateY(30px);
            opacity: 0;
        }

        h1 {
            font-size: 3.5rem;
            margin-bottom: 0.5rem;
            color: #1a1a1a;
            font-weight: 900;
        }

        h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: #1a1a1a;
            font-weight: 700;
        }

        p {
            font-size: 1.2rem;
            line-height: 1.8;
            color: #333;
        }

        .highlight {
            color: #667eea;
            font-weight: bold;
        }

        /* Section positioning */
        #section-1 {
            justify-content: center;
            text-align: center;
            align-items: center;
        }

        #section-2 {
            justify-content: flex-start;
        }

        #section-3 {
            justify-content: flex-end;
        }

        #section-4 {
            justify-content: center;
            text-align: center;
        }
    </style>
</head>
<body>

    <div id="canvas-container"></div>

    <section id="section-1">
        <div class="content-block">
            <h1>Nike Air Force 1</h1>
            <p>Scroll down to explore every detail of this <span class="highlight">iconic sneaker</span> in stunning 3D.</p>
        </div>
    </section>

    <section id="section-2">
        <div class="content-block">
            <h2>Classic Design</h2>
            <p>The <span class="highlight">legendary silhouette</span> that defined sneaker culture. Notice the clean lines and timeless shape that's been turning heads since 1982.</p>
        </div>
    </section>

    <section id="section-3">
        <div class="content-block">
            <h2>Premium Details</h2>
            <p>Every stitch, every panel tells a story. The <span class="highlight">Air-Sole unit</span> provides lightweight cushioning with every step.</p>
        </div>
    </section>

    <section id="section-4">
        <div class="content-block">
            <h2>Own the Legacy</h2>
            <p>More than just a shoe. It's a <span class="highlight">cultural icon</span> that transcends generations.</p>
        </div>
    </section>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <script>
        // === THREE.JS SETUP ===
        const scene = new THREE.Scene();
        scene.background = null; // Transparent
        scene.fog = new THREE.Fog(0x1e3c72, 8, 25);

        const camera = new THREE.PerspectiveCamera(
            50,
            window.innerWidth / window.innerHeight,
            0.1,
            1000
        );
        camera.position.set(0, 1, 6);

        const renderer = new THREE.WebGLRenderer({ 
            alpha: true, 
            antialias: true 
        });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.shadowMap.enabled = true;
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.toneMappingExposure = 1.2;
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        // === LIGHTING ===
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
        scene.add(ambientLight);

        const keyLight = new THREE.DirectionalLight(0xffffff, 1.5);
        keyLight.position.set(8, 12, 6);
        keyLight.castShadow = true;
        scene.add(keyLight);

        const fillLight = new THREE.DirectionalLight(0xffffff, 0.6);
        fillLight.position.set(-6, 8, -4);
        scene.add(fillLight);

        const rimLight = new THREE.DirectionalLight(0x667eea, 0.8);
        rimLight.position.set(0, 4, -8);
        scene.add(rimLight);

        // === LOAD NIKE SHOE ===
        let shoeModel = null;
        const loader = new THREE.GLTFLoader();

        loader.load(
            './scene.gltf',
            function (gltf) {
                shoeModel = gltf.scene;

                // Center and scale the shoe
                const box = new THREE.Box3().setFromObject(shoeModel);
                const size = box.getSize(new THREE.Vector3());
                const center = box.getCenter(new THREE.Vector3());

                // Center it
                shoeModel.position.x -= center.x;
                shoeModel.position.y -= center.y;
                shoeModel.position.z -= center.z;

                // Scale it
                const maxDim = Math.max(size.x, size.y, size.z);
                const scale = 3 / maxDim;
                shoeModel.scale.set(scale, scale, scale);

                // Enable shadows
                shoeModel.traverse((child) => {
                    if (child.isMesh) {
                        child.castShadow = true;
                        child.receiveShadow = true;
                    }
                });

                scene.add(shoeModel);

                // Initial position and rotation
                shoeModel.position.set(0, 0, 0);
                shoeModel.rotation.set(0, -Math.PI / 4, 0);

                console.log('âœ… Nike Air Force 1 loaded!');

                // Start scroll animations AFTER model loads
                initScrollAnimations();
            },
            function (xhr) {
                console.log((xhr.loaded / xhr.total * 100) + '% loaded');
            },
            function (error) {
                console.error('Error loading model:', error);
            }
        );

        // === ANIMATION LOOP ===
        function animate() {
            requestAnimationFrame(animate);

            // Gentle floating animation
            if (shoeModel) {
                shoeModel.position.y += Math.sin(Date.now() * 0.001) * 0.0005;
            }

            renderer.render(scene, camera);
        }
        animate();

        // === WINDOW RESIZE ===
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // === GSAP SCROLL ANIMATIONS ===
        function initScrollAnimations() {
            if (!shoeModel) return;

            gsap.registerPlugin(ScrollTrigger);

            // Main scroll-driven timeline
            const tl = gsap.timeline({
                scrollTrigger: {
                    trigger: "body",
                    start: "top top",
                    end: "bottom bottom",
                    scrub: 2, // Smooth scrubbing
                }
            });

            // Section 1 to 2: Move shoe right, rotate to show side view
            tl.to(shoeModel.position, {
                x: 3,
                z: -1,
                duration: 1
            }, "scene1")
            .to(shoeModel.rotation, {
                y: Math.PI * 0.5, // 90 degrees
                x: 0.1,
                duration: 1
            }, "scene1");

            // Section 2 to 3: Move shoe left, rotate to show other side
            tl.to(shoeModel.position, {
                x: -3,
                z: 0,
                duration: 1
            }, "scene2")
            .to(shoeModel.rotation, {
                y: -Math.PI * 0.5, // -90 degrees
                x: -0.1,
                duration: 1
            }, "scene2");

            // Section 3 to 4: Center shoe, front view close-up
            tl.to(shoeModel.position, {
                x: 0,
                z: 1,
                y: -0.2,
                duration: 1
            }, "scene3")
            .to(shoeModel.rotation, {
                y: 0,
                x: 0,
                z: 0,
                duration: 1
            }, "scene3");

            // Text reveal animations
            const blocks = document.querySelectorAll('.content-block');
            blocks.forEach(block => {
                gsap.to(block, {
                    opacity: 1,
                    y: 0,
                    duration: 1.2,
                    ease: "power2.out",
                    scrollTrigger: {
                        trigger: block,
                        start: "top 75%",
                        toggleActions: "play none none reverse"
                    }
                });
            });
        }

    </script>
</body>
</html>